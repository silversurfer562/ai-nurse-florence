# AI Nurse Florence - Environment Configuration Template
# Copy this file to .env and customize for your environment
# Never commit .env file with real secrets to version control

# ================================
# APPLICATION SETTINGS
# ================================

# Application Environment
APP_ENV=development
NODE_ENV=development
PYTHON_ENV=development
DEBUG=true
APP_VERSION=0.0.0

# Application URLs
APP_URL=http://localhost:8000
FRONTEND_URL=http://localhost:3000
API_BASE_URL=http://localhost:8000/api/v1

# Production URL Configuration
# For Railway/production, set APP_BASE_URL to your domain:
# APP_BASE_URL=https://ainurseflorence.com
# If APP_BASE_URL is not set, use FORCE_HTTPS=true to construct https URLs
APP_BASE_URL=http://localhost:8000
FORCE_HTTPS=false

# ================================
# API AUTHENTICATION & SECURITY
# ================================

# API Bearer Token for internal services (CHANGE THIS IN PRODUCTION!)
API_BEARER=change-me-to-a-strong-random-token-in-production

# JWT Secret Key (Generate a strong secret for production)
JWT_SECRET_KEY=your-jwt-secret-key-change-this-in-production
JWT_ALGORITHM=HS256
JWT_EXPIRE_MINUTES=30

# CORS Configuration
CORS_ORIGINS=http://localhost:3000,http://localhost:8000,https://silversurfer562.github.io
CORS_ALLOW_CREDENTIALS=true

# ================================
# EXTERNAL SERVICES & APIs
# ================================

# ================================
# AI PROVIDER CONFIGURATION
# ================================

# Choose your AI provider: 'openai' or 'anthropic'
# - openai: Cheaper, faster (gpt-4o-mini recommended)
# - anthropic: Higher quality, better reasoning (claude-3-5-sonnet recommended)
AI_PROVIDER=openai

# OpenAI Configuration
# Get your API key from: https://platform.openai.com/api-keys
# Recommended models:
#   - gpt-4o-mini: $0.15/1M tokens (best for dev/testing, 64% cheaper than gpt-3.5-turbo)
#   - gpt-4o: $2.50/1M tokens (best for production)
#   - gpt-4-turbo: $10/1M tokens (overkill for most tasks)
OPENAI_API_KEY=your-openai-api-key-here
OPENAI_MODEL=gpt-4o-mini
OPENAI_MAX_TOKENS=2000
OPENAI_TEMPERATURE=0.7

# Anthropic Claude Configuration
# Get your API key from: https://console.anthropic.com/
# Recommended models:
#   - claude-3-haiku: $0.25/1M tokens (fast, cheap)
#   - claude-3-5-sonnet: $3.00/1M tokens (best quality/reasoning)
#   - claude-3-opus: $15/1M tokens (exceptional, but expensive)
ANTHROPIC_API_KEY=your-anthropic-api-key-here
ANTHROPIC_MODEL=claude-3-5-sonnet-20241022

# Cost Comparison (per 10,000 API calls with 1K input/500 output tokens):
#   gpt-4o-mini:          $4.50   (‚ö° Best for dev/test)
#   claude-3-haiku:       $8.80
#   gpt-3.5-turbo:       $12.50   (deprecated - use gpt-4o-mini instead)
#   gpt-4o:              $75.00   (üèÜ Best for production)
#   claude-3-5-sonnet:  $105.00   (üéØ Best quality - use when you need the best)
#   gpt-4-turbo:        $250.00   (expensive, usually not needed)
#   claude-3-opus:      $525.00   (very expensive, rarely needed)

# AI Fallback Configuration (Production Reliability)
# Enable automatic failover to secondary provider on failures
AI_FALLBACK_ENABLED=true

# Fallback Provider (auto-selects alternate if not specified)
# If primary is 'anthropic', fallback defaults to 'openai' (and vice versa)
# AI_FALLBACK_PROVIDER=openai

# Fallback Model (uses provider default if not specified)
# AI_FALLBACK_MODEL=gpt-4o

# Retry & Circuit Breaker Settings
AI_MAX_RETRIES=3                      # Retry attempts before triggering fallback
AI_CIRCUIT_BREAKER_THRESHOLD=5        # Failures before opening circuit breaker
AI_CIRCUIT_BREAKER_TIMEOUT=60         # Seconds before retrying failed provider (1 minute)

# Quick Switch Examples:
# For development/testing (save money):  AI_PROVIDER=openai, OPENAI_MODEL=gpt-4o-mini
# For production (balanced):             AI_PROVIDER=openai, OPENAI_MODEL=gpt-4o
# For best quality (healthcare):         AI_PROVIDER=anthropic, ANTHROPIC_MODEL=claude-3-5-sonnet-20241022
#
# Production with automatic fallback (RECOMMENDED for healthcare):
#   AI_PROVIDER=anthropic
#   ANTHROPIC_MODEL=claude-3-5-sonnet-20241022  # Primary (quality)
#   AI_FALLBACK_ENABLED=true
#   AI_FALLBACK_PROVIDER=openai                  # Fallback (reliability)
#   AI_FALLBACK_MODEL=gpt-4o                     # Fallback model

# Medical Data APIs
MYDISEASE_API_URL=https://mydisease.info/v1
MEDLINEPLUS_API_URL=https://connect.medlineplus.gov/service
PUBMED_API_URL=https://eutils.ncbi.nlm.nih.gov/entrez/eutils

# Service Feature Flags
USE_LIVE_SERVICES=false
USE_LIVE_APIS=false
USE_MYDISEASE=true
USE_MEDLINEPLUS=true
USE_PUBMED=true

# MeSH JSON index (optional) - set to a local path to enable MeSH mapping
MESH_JSON_PATH=/path/to/mesh.json

# ================================
# DATABASE CONFIGURATION
# ================================

# SQLite (Default for development)
DATABASE_URL=sqlite:///./ai_nurse_florence.db

# PostgreSQL (Production - uncomment and configure for Railway)
# DATABASE_URL=postgresql://username:password@host:5432/ai_nurse_florence
# DB_HOST=localhost
# DB_PORT=5432
# DB_NAME=ai_nurse_florence
# DB_USER=your_db_user
# DB_PASSWORD=your_db_password

# Testing Database
TEST_DATABASE_URL=sqlite:///./test_ai_nurse_florence.db

# ================================
# CACHING & PERFORMANCE
# ================================

# Redis Configuration
# For local development:
REDIS_URL=redis://localhost:6379/0
# For Railway with Redis plugin:
# REDIS_URL=redis://default:password@redis.railway.internal:6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_MAX_CONNECTIONS=20

# Cache Settings
CACHE_TTL_SECONDS=3600
CACHE_MAX_SIZE=1000
ENABLE_CACHING=true

# ================================
# RATE LIMITING & SECURITY
# ================================

# Rate Limiting
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_BURST=100
RATE_LIMIT_ENABLED=true

# Security Headers
ENABLE_SECURITY_HEADERS=true
CONTENT_SECURITY_POLICY=default-src 'self'; script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net https://cdnjs.cloudflare.com
HSTS_MAX_AGE=31536000

# ================================
# LOGGING & MONITORING
# ================================

# Logging Configuration
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE=logs/ai_nurse_florence.log
ENABLE_ACCESS_LOGS=true

# Monitoring & Metrics
ENABLE_METRICS=false
PROMETHEUS_PORT=9090
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=change-me-in-production

# Health Check Settings
HEALTH_CHECK_TIMEOUT=30
HEALTH_CHECK_INTERVAL=60

# ================================
# EMAIL & NOTIFICATIONS (Optional)
# ================================

# SMTP Configuration for notifications
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=noreply@example.com
SMTP_PASSWORD=your-smtp-password
SMTP_TLS=true

# Notification Settings
ADMIN_EMAIL=admin@example.com
ENABLE_EMAIL_NOTIFICATIONS=false

# ================================
# DEPLOYMENT SETTINGS
# ================================

# Server Configuration
SERVER_HOST=0.0.0.0
SERVER_PORT=8000
SERVER_WORKERS=1
SERVER_RELOAD=true

# Production Settings
ENVIRONMENT=production
FUNCTION_TIMEOUT=30
FUNCTION_MEMORY=512

# Railway Configuration
RAILWAY_ENVIRONMENT=

# ================================
# DEVELOPMENT & TESTING
# ================================

# Development Flags
ENABLE_DEBUG_ROUTES=false
ENABLE_RELOAD=true
ENABLE_DOCS=true
TESTING=false

# ================================
# FEATURE FLAGS
# ================================

# Educational Features
ENABLE_SBAR_TEMPLATES=true
ENABLE_CLINICAL_OPTIMIZER=true
ENABLE_DISEASE_LOOKUP=true

# Advanced Features
ENABLE_USER_AUTHENTICATION=false
ENABLE_USAGE_ANALYTICS=false
ENABLE_CHAT_HISTORY=false

# ================================
# QUICK START INSTRUCTIONS
# ================================

# 1. Copy this file:
#    cp .env.example .env
#
# 2. Edit .env and set at minimum:
#    - OPENAI_API_KEY (required for AI features)
#    - REDIS_URL (if using Redis)
#    - JWT_SECRET_KEY (generate a secure random string)
#    - API_BEARER (generate a secure random string)
#
# 3. For Railway deployment:
#    Set these variables in Railway dashboard:
#    - OPENAI_API_KEY
#    - REDIS_URL (if using Railway Redis plugin)
#    - JWT_SECRET_KEY
#    - API_BEARER
#    - APP_BASE_URL=https://your-domain.com
#    - FORCE_HTTPS=true
